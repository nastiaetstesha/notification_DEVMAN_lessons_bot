# notification DEVMAN lessons bot
Python 3.12
 ‚Äî —ç—Ç–æ Telegram-–±–æ—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ —Å—Ç–∞—Ç—É—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Ä–æ–∫–æ–≤.
–ü—Ä–∏–º–µ—Ä: t.me/notification_DEVMAN_lessons_bot


## üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- –ü–æ–ª—É—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ä–∞–±–æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```sh
git clone <URL-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è>
cd <–Ω–∞–∑–≤–∞–Ω–∏–µ-–ø—Ä–æ–µ–∫—Ç–∞>
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```sh
pip install -r requirements.txt
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è `.env`
–°–æ–∑–¥–∞–π `.env` —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –¥–æ–±–∞–≤—å:
```ini
DVMN_TOKEN=—Ç–≤–æ–π —Ç–æ–∫–µ–Ω –Ω–∞ —Å–∞–π—Ç–µ –î–µ–≤–º–∞–Ω
TELEGRAM_BOT_TOKEN=—Ç–æ–∫–µ–Ω —Ç–µ–ª–µ–≥—Ä–∞–º–º –±–æ—Ç–∞
TELEGRAM_CHAT_ID=—Ç–≤–æ–π —á–∞—Ç –∞–π–¥–∏
```

## üìú –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
project_root/
‚îÇ‚îÄ‚îÄ main.py                # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞
‚îÇ‚îÄ‚îÄ utils.py              # –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–æ—Ç–æ–º
‚îÇ‚îÄ‚îÄ requirements.txt      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ‚îÄ‚îÄ .env                  # –§–∞–π–ª —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ‚îÄ‚îÄ README.md             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
```

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
### –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
```sh
python main.py
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –æ—Ç–ø—Ä–∞–≤—å –∫–æ–º–∞–Ω–¥—É `/start`.

## üìå –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- `python-telegram-bot` ‚Äî –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Telegram API.
- `requests` ‚Äî –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API.
- `python-dotenv` ‚Äî –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è.


# –°–µ—Ä–≤–µ—Ä Zomro

1. üîë –¢–≤–æ–π SSH-–ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω –≤ /root/.ssh/authorized_keys

2. üß≠ IP-–∞–¥—Ä–µ—Å:
194.26.232.149
–Æ–∑–µ—Ä–Ω–µ–π–º: root

** –≤—Ö–æ–¥ —Ç–æ–ª—å–∫–æ –ø–æ SSH-–∫–ª—é—á—É, –ø–∞—Ä–æ–ª—å –Ω–µ –Ω—É–∂–µ–Ω **

3. üö™ –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è:

ssh -i ~/.ssh/your_key_file root@194.26.232.149

## –°–æ–∑–¥–∞–π systemd unit-—Ñ–∞–π–ª
–û—Ç–∫—Ä–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä:


`sudo nano /etc/systemd/system/review_tg_bot.service`

–í—Å—Ç–∞–≤—å —Ç—É–¥–∞ —Å–ª–µ–¥—É—é—â–µ–µ (–ø–æ–¥ —Ç–≤–æ–π –ø—É—Ç—å –∏ venv!!!):
```
[Unit]
Description=Telegram bot for DEVMAN review notifications
After=network.target

[Service]
WorkingDirectory=/opt/review_tg_bot/notification_DEVMAN_lessons_bot
ExecStart=/opt/review_tg_bot/venv/bin/python3.12 /opt/review_tg_bot/notification_DEVMAN_lessons_bot/main.py
Restart=always
Environment="PYTHONUNBUFFERED=1"

[Install]
WantedBy=multi-user.target
```
–°–æ—Ö—Ä–∞–Ω–∏ (Ctrl + O, Enter) –∏ –≤—ã–π–¥–∏ (Ctrl + X)

** –Æ–Ω–∏—Ç-—Ñ–∞–π–ª ‚Äî —ç—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π –≥–æ–≤–æ—Ä–∏—Ç —Å–∏—Å—Ç–µ–º–µ (systemd), –∫–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–≤–æ—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. **
---
## –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ systemd:

```
sudo systemctl daemon-reload
sudo systemctl restart review_tg_bot
sudo systemctl status review_tg_bot
```
## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```
sudo systemctl status review_tg_bot
```

`Active: active (running)` –µ—Å–ª–∏ –∞–∫—Ç–∏–≤–µ–Ω –±–æ—Ç –∏–ª–∏ ` Active: failed`

## –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫
```
journalctl -u review_tg_bot -f
```
(–ª–∞–π–≤-—Ä–µ–∂–∏–º –ª–æ–≥–æ–≤, Ctrl+C —á—Ç–æ–±—ã –≤—ã–π—Ç–∏)


## –ß—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞, –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å:

`sudo systemctl stop review_tg_bot`
## –ò –Ω–∞–æ–±–æ—Ä–æ—Ç, –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–Ω–æ–≤–∞:


`sudo systemctl start review_tg_bot`